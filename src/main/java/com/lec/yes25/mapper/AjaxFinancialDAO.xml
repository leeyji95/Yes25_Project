<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lec.yes25.financial.ajax.AjaxFinancialDAO">

<select id="selectFromRow" 
		resultType="com.lec.yes25.financial.FinancialDTO">
		
	<!-- 비교연산자 같은 경우에는 xml에서 사용할 수 없기 때문에 CDATA를 이용하여 사용한다 -->
	<![CDATA[
	SELECT 
		stmt_uid, 
		stmt_date regDate,
		account_uid, 
		stmt_summary summary, 
		stmt_sum money,
		stmt_writer writer,
		stmt_manager manager, 
		stmt_approver approver, 
		stmt_proceed proceed
	FROM 
		(SELECT ROWNUM AS RNUM, T.* FROM 
			(SELECT * FROM tb_statement ORDER BY stmt_uid DESC) T) 
	WHERE 
		RNUM >= #{from} AND RNUM < (#{from} + #{pageRows})
	]]>
</select>

<select id="countAll" resultType="int">
	SELECT count(*) FROM tb_statement
</select>

<!-- insert -->
<insert id="insert" flushCache="true">
	INSERT INTO tb_statement
		(stmt_uid, stmt_date, account_uid, stmt_summary, stmt_sum, 
 		stmt_writer, stmt_manager, stmt_approver)
	VALUES
		(statement_seq.nextval,
		#{regDate},
		#{account_uid},
		#{summary},
		#{money},
		#{writer},
		#{manager},
		#{approver})
</insert>


</mapper>